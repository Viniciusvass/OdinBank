<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Solicitações de Cartões - OdinBank</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'perfil/gerente/solicitacoes_cartoes/style.css' %}">
</head>
<body>
    <main class="main">
        <header class="main-header">
            <h1>Solicitações de Cartões</h1>
            <p>Gerencie os pedidos de cartões feitos pelos seus clientes.</p>
        </header>

        {% if solicitacoes %}
        <section class="solicitacoes-container">
            {% for s in solicitacoes %}
            <div class="solicitacao-card">
                <div class="solicitacao-header">
                    <h3>{{ s.cliente.username }}</h3>
                    <span class="status {{ s.status }}">{{ s.get_status_display }}</span>
                </div>

                <div class="solicitacao-info">
                    <p><strong>Cartão:</strong> {{ s.cartao.nome }} ({{ s.cartao.get_tipo_display }})</p>
                    <p class="data">Solicitado em: {{ s.data_solicitacao|date:"d/m/Y H:i" }}</p>
                </div>

                {% if s.status == "pendente" %}
                <div class="acoes">
                    <a href="{% url 'users:aprovar_ou_negar_cartao' s.id 'aprovar' %}" class="btn-aprovar">Aprovar</a>
                    <a href="{% url 'users:aprovar_ou_negar_cartao' s.id 'negar' %}" class="btn-negar">Negar</a>
                </div>
                {% elif s.resposta_gerente %}
                <p class="resposta"><strong>Resposta do gerente:</strong> {{ s.resposta_gerente }}</p>
                {% endif %}
            </div>
            {% endfor %}
        </section>
        {% else %}
            <p class="sem-solicitacoes">Nenhuma solicitação de cartão encontrada.</p>
        {% endif %}
    </main>
</body>
</html>
